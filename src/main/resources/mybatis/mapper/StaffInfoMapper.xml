<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lclgl.dao.StaffInfoMapper">

    <select id="getStaff" resultType="StaffInfo">
        select * from staff_info where user_id=#{userId}
    </select>

    <select id="getStatusType" resultType="String">
        select status_type from status_level where status_id=#{statusId}
    </select>

    <select id="getManagerByTeam" resultType="StaffInfo">
        select * from staff_info where team_id=#{teamId} and status_id!=106 and status_id!=107
    </select>
    
    <select id="getTeamMembers" resultType="StaffInfo">
        select * from staff_Info
        where user_id!=#{staffId} and team_id=#{teamId}
    </select>

    <select id="staffModify">
        update staff_info set staff_phone=#{staffPhone},staff_qq=#{staffQQ},staff_email=#{staffEmail} where user_id=#{userId}
    </select>

    <select id="getcurrentProNumById" resultType="int">
        select count(*) from pro_stage where team_id=#{teamId} and stage_condition='未完成'
    </select>

    <select id="getfinishedProNumById" resultType="int">
        select count(*) from pro_stage where team_id=#{teamId} and stage_condition='已完成'
    </select>

</mapper>